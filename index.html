<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>EV 계산기</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:#ffffff;
}

.wrap{
  max-width:560px;
  margin:20px auto;
  padding:16px;
}

.box{
  border:1px solid #e5e5e5;
  padding:16px;
  border-radius:12px;
}

h3{
  margin:0 0 10px;
  font-size:18px;
}

p{
  margin:0 0 14px;
  color:#555;
  line-height:1.5;
}

label{
  display:block;
  margin:10px 0 6px;
  font-weight:600;
}

input{
  width:100%;
  padding:10px;
  border:1px solid #ccc;
  border-radius:8px;
  box-sizing:border-box;
}

button{
  margin-top:14px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:#efefef;
  font-weight:600;
}

#resultBox{
  margin-top:14px;
  padding:12px;
  background:#fafafa;
  border-radius:10px;
  display:none;
}

.row{ margin-bottom:8px; }
#verdict{ font-weight:700; }

.note{
  margin:10px 0 0;
  color:#666;
  font-size:13px;
  line-height:1.45;
}
</style>
</head>

<body>
<div class="wrap">
  <div class="box">
    <h3>역배 가치(EV) 간단 계산기</h3>
    <p>내 추정 확률과 배당을 넣으면, 암묵 확률과 EV를 바로 계산합니다.</p>

    <label>내가 추정한 승리 확률 (%)</label>
    <input id="pInput" type="number" min="0" max="100" step="0.1" value="30">

    <label>배당 (Decimal, 예: 3.50)</label>
    <input id="oddsInput" type="number" min="1.01" step="0.01" value="3.50">

    <button id="calcBtn">계산하기</button>

    <div id="resultBox">
      <div class="row"><strong>암묵 확률:</strong> <span id="impliedProb"></span></div>
      <div class="row"><strong>EV(기댓값):</strong> <span id="evValue"></span></div>
      <div id="verdict"></div>
      <p class="note">*EV는 같은 선택을 장기 반복했을 때 유리한 구조인가를 보는 참고 지표입니다.</p>
    </div>
  </div>
</div>

<script>
(function(){

  function formatPercent(x){
    return (x*100).toFixed(1) + "%";
  }

  document.getElementById("calcBtn").addEventListener("click", function(){

    var p = Math.max(0, Math.min(1, parseFloat(document.getElementById("pInput").value)/100));
    var odds = Math.max(1.01, parseFloat(document.getElementById("oddsInput").value));

    var implied = 1/odds;
    var ev = (p*odds)-1;

    document.getElementById("impliedProb").textContent = formatPercent(implied);
    document.getElementById("evValue").textContent = (ev>=0?"+":"") + (ev*100).toFixed(1)+"%";

    var verdict = document.getElementById("verdict");

    if(ev > 0.01){
      verdict.textContent = "판정: 가치가 있을 가능성이 있습니다.";
      verdict.style.color = "#0a7a2f";
    }else if(ev < -0.01){
      verdict.textContent = "판정: 장기적으로 불리할 가능성이 큽니다.";
      verdict.style.color = "#b00020";
    }else{
      verdict.textContent = "판정: 경계선 구간입니다.";
      verdict.style.color = "#444";
    }

    document.getElementById("resultBox").style.display="block";
  });

})();
</script>

</body>
</html>
